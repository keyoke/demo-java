<?xml version="1.0" encoding="utf-8"?>
<ApplicationInsights xmlns="http://schemas.microsoft.com/ApplicationInsights/2013/Settings" schemaVersion="2014-05-30">


  <!-- The key from the portal: -->
  <!-- 
    System property: -DAPPLICATION_INSIGHTS_IKEY=your_ikey
    Environment variable: APPLICATION_INSIGHTS_IKEY
    Configuration file: ApplicationInsights.xml
  -->
  <InstrumentationKey></InstrumentationKey>


  <!-- HTTP request component (not required for bare API) -->
  <TelemetryModules>
    <Add type="com.microsoft.applicationinsights.web.extensibility.modules.WebRequestTrackingTelemetryModule"/>
    <Add type="com.microsoft.applicationinsights.web.extensibility.modules.WebSessionTrackingTelemetryModule"/>
    <Add type="com.microsoft.applicationinsights.web.extensibility.modules.WebUserTrackingTelemetryModule"/>
  </TelemetryModules>

  <!-- Events correlation (not required for bare API) -->
  <!-- These initializers add context data to each event -->

  <TelemetryInitializers>
    <Add type="com.microsoft.applicationinsights.web.extensibility.initializers.WebOperationIdTelemetryInitializer"/>
    <Add type="com.microsoft.applicationinsights.web.extensibility.initializers.WebOperationNameTelemetryInitializer"/>
    <Add type="com.microsoft.applicationinsights.web.extensibility.initializers.WebSessionTelemetryInitializer"/>
    <Add type="com.microsoft.applicationinsights.web.extensibility.initializers.WebUserTelemetryInitializer"/>
    <Add type="com.microsoft.applicationinsights.web.extensibility.initializers.WebUserAgentTelemetryInitializer"/>
    <Add type="com.microsoft.applicationinsights.extensibility.initializer.docker.DockerContextInitializer"/>
  </TelemetryInitializers>

  <PerformanceCounters collectionFrequencyInSec="60">
    <!--
    Built-in performance counters include:
      * Everything in the <Jvm /> section
      * These system performance counters (collected on both Linux and Windows):
        - category=Process, name=Private Bytes, instance="__SELF__"
        - category=Process, name=% Processor Time, instance="__SELF__"
        - category=Processor, name=% Processor Time, instance="_Total"
        - category=Process, name=IO Data Bytes/sec, instance="__SELF__"
        - category=Memory, name=Available Bytes, instance=""
    -->
    <UseBuiltIn>true</UseBuiltIn>
    <!--
    This controls the JvmPerformanceCountersModule.
    It can be disabled, or each individual component can be disabled.
    This is optional; the example below shows the defaults.
    -->
    <Jvm enabled="true">
      <JvmPC name="GC" enabled="true" />
      <JvmPC name="MemoryUsage" enabled="true" />
      <JvmPC name="ThreadDeadLockDetector" enabled="true" />
    </Jvm>
    
    <!-- 
    Additional Linux system metrics are configured using the collectd plugin.
    https://github.com/Huachao/azure-content/blob/master/articles/application-insights/app-insights-java-collectd.md
    -->

    <!--
    Below, you'll find some example JMX metrics.
    There are three supported JMX metric attribute types: REGULAR (the default), COMPOSITE and TABULAR.
      COMPOSITE attributes are of the form 'X.y' and TABULAR attributes are of the form 'X.y.z'.
    -->
    <Jmx>
      <Add displayName="Thread Count(JMX)"
        objectName="java.lang:type=Threading"
        attribute="ThreadCount" />
      <Add displayName="Used Heap Memory(JMX)"
        objectName="java.lang:type=Memory"
        attribute="HeapMemoryUsage.used"
        type="COMPOSITE" />
      <Add displayName="Initial Heap Memory(JMX)"
        objectName="java.lang:type=Memory"
        attribute="HeapMemoryUsage.init" 
        type="COMPOSITE"/>
      <Add displayName="GC MarkSweep Time(JMX)" 
        objectName="java.lang:name=PS MarkSweep,type=GarbageCollector"
        attribute="CollectionTime" /> 
      <Add displayName="Current Loaded Class Count(JMX)"
        objectName="java.lang:type=ClassLoading"
        attribute="LoadedClassCount" /> 
    </Jmx>
  </PerformanceCounters>
  <!-- This turns on diagnostic level logging -->
  <SDKLogger />
</ApplicationInsights>
